(function(e){e.exposure={v:"1.0.1",defaultTargetId:"exposure",wrapperClass:"exposureWrapper",targetClass:"exposureTarget",currentImageClass:"exposureCurrentImage",lastImageClass:"exposureLastImage",captionClass:"caption",imageDataClass:"extra",dataContainerClass:"exposureData",controlsClass:"exposureControls",slideshowControlsClass:"exposureSlideshowControls",firstPageClass:"exposureFirstPage",prevPageClass:"exposurePrevPage",nextPageClass:"exposureNextPage",lastPageClass:"exposureLastPage",pagingClass:"exposurePaging",playSlideshowClass:"exposurePlaySlideshow",pauseSlideshowClass:"exposurePauseSlideshow",maskClass:"exposureMask",thumbsClass:"exposureThumbs",imageClass:"exposureImage",imageHoverClass:"exposureHover",selectedImageClass:"selected",activeThumbClass:"active",currentThumbClass:"current",firstThumbClass:"first",lastThumbClass:"last",loadedClass:"loaded",activeLinkClass:"active",disabledLinkClass:"disabled",isDefined:function(e){return e!==void 0},isObject:function(e){return"object"==typeof e},startsWith:function(e,t){return e&&t?e.match("^"+t)===t:!1},widthDiff:function(e){return e?e.outerWidth(!0)-e.width():0},heightDiff:function(e){return e?e.outerHeight(!0)-e.height():0},createLink:function(t,i,n){var a=e('<a href="javascript:void(0);"></a>').text(t).click(i);return n&&a.addClass(n),a},texts:{first:"First",previous:"Prev",next:"Next",last:"Last",play:"Play slideshow",pause:"Pause slideshow"}};var t={target:"#"+e.exposure.defaultTargetId,showThumbs:!0,showControls:!0,imageControls:!1,controls:{prevNext:!0,firstLast:!0,pageNumbers:!0},carouselControls:!1,enableSlideshow:!0,slideshowControlsTarget:null,autostartSlideshow:!1,slideshowDelay:3e3,onSlideshowPlayed:function(){},onSlideshowPaused:function(){},showCaptions:!0,showExtraData:!0,dataTarget:null,controlsTarget:null,onThumb:function(){},onImage:function(t){t.siblings("."+e.exposure.lastImageClass).remove()},onImageHoverOver:function(){},onImageHoverOut:function(){},onCarousel:function(){},onNext:function(){},onPrev:function(){},onPageChanged:function(){},onPagingLink:function(e){return e},separatePageBrowsing:!1,loop:!0,onEndOfLoop:function(){},pageSize:5,viewFirstImage:!0,visiblePages:5,preloadBuffer:3,keyboardNavigation:!0,clickingNavigation:!0,fixedContainerSize:!1,maxWidth:null,maxHeight:null,stretchToMaxSize:!1,fullScreen:!1,onEnterFullScreen:function(e){e.show()},onExitFullScreen:function(e,t){e.hide(),t.hide()},showThumbToolTip:!0,onEmpty:function(e){e.hide(),e.targetElement.remove(),e.showControls&&e.controlsElement.remove(),e.slideshowControlsTarget&&e.slideshowControlsElement.remove()},onInit:function(){},allowDuplicates:!0,jsonSource:null},i=function(e,t,i,n){this.src=e,this.thumb=t,this.caption=i,this.data=n,this.loaded=!1};e.fn.exposure=function(n){var a=this,o=e.exposure,r=o.texts;e.extend(this,{images:[],sources:{},newImage:function(e,t,n,r){var s=o.isDefined(a.sources[e]);if(s&&!a.allowDuplicates)return-1;var l=new i(e,t,n,r),c=a.images.push(l)-1;return s||(a.sources[e]=c),c},initialized:!1,current:-1,deselectCurrentImage:function(){a.current=-1,a.find("li."+o.activeThumbClass).removeClass(o.activeThumbClass)},loadQueue:[],addToLoadQueue:function(e){a.loaded(e)||a.queued(e)||a.loadQueue.push(e)},queued:function(t){return e.inArray(t,a.loadQueue)>-1},loaded:function(e){var t=a.getImage(e);return null!==t?t.loaded:!1},nextInLoadQueue:function(){var t;if(a.loadQueue.length>0){var i=a.loadQueue.shift();return a.loaded(i)?(t=e.inArray(i,this.loadQueue),a.loadQueue.splice(t,1),a.nextInLoadQueue()):i}return null},preloadNextInQueue:function(){if(a.loadQueue.length>0){var e=a.nextInLoadQueue();null!==e&&a.loadImage(e,a.preloadNextInQueue)}},loadImage:function(t,i){var n,r=a.getImage(t),s=e("<img />").addClass(o.imageClass);return null!==r&&(r.loaded=!0,a.queued(t)&&(n=e.inArray(t,a.loadQueue),a.loadQueue.splice(n,1)),"function"==typeof i&&s.load(i),s.attr("src",r.src)),s},pageNumberForImage:function(e){return Math.ceil((e+1)/a.pageSize)},numberOfPages:function(){return this.pageNumberForImage(a.images.length-1)},atFirstPage:function(){return 1===a.currentPage},atLastPage:function(){return a.currentPage===a.numberOfPages()},validPage:function(e){return e>0&&a.numberOfPages()>=e},createPaging:function(){var t;if(a.showControls&&a.controls.pageNumbers){var i=a.imageControls?a.numberOfImages():a.numberOfPages();a.controlsElement.find("."+o.pagingClass).each(function(){for(t=1;i>=t;t++)e(this).append(a.newPagingLink(t))})}},updatePaging:function(t){if(a.showControls&&a.controls.pageNumbers){var i=a.imageControls?a.current+1:a.currentPage,n=a.controlsElement.find("."+o.pagingClass);n.find(" span."+o.activeLinkClass).each(function(){e(this).replaceWith(a.newPagingLink(i))}),n.find('a[rel="'+t+'"]').each(function(){e(this).replaceWith(e("<span>"+t+"</span>").addClass(o.activeLinkClass))});var r=a.imageControls?a.numberOfImages():a.numberOfPages();if(a.visiblePages>0&&r>a.visiblePages){var s=t,l=a.visiblePages,c=Math.floor(a.visiblePages/2);c>=t?s=1:t>r-c?(l=r,s=l-a.visiblePages+1):(s-=c,l=s+a.visiblePages-1),n.each(function(){e(this).children().each(function(t){var i=t+1;i>=s&&l>=i?e(this).show():e(this).hide()})})}}},newPagingLink:function(t){var i=function(){var t=Number(e(this).attr("rel"));a.imageControls?a.viewImage(t-1):a.goToPage(t)};return o.createLink(t,i).attr("rel",t)},getNextImage:function(){return a.current!==a.images.length-1?a.current+1:a.loop?0:(a.onEndOfLoop(),null)},getPrevImage:function(){return 0!==a.current?a.current-1:a.loop?a.images.length-1:null},currentPage:1,goToPage:function(t,i){if(this.validPage(t)){a.find("li").removeClass(o.currentThumbClass).hide(),a.loadPage(t,i),a.imageControls||a.updatePaging(t),a.currentPage=t;var n=o.disabledLinkClass;a.showControls&&(a.atFirstPage()?(a.controls.firstLast&&a.find("."+o.firstPageClass).addClass(n),!a.loop&&a.controls.prevNext&&a.find("."+o.prevPageClass).hide()):(a.controls.firstLast&&a.find("."+o.firstPageClass).removeClass(n),!a.loop&&a.controls.prevNext&&a.find("."+o.prevPageClass).show()),a.atLastPage()?(a.controls.firstLast&&a.find("."+o.lastPageClass).addClass(n),!a.loop&&a.controls.prevNext&&a.find("."+o.nextPageClass).hide()):(a.controls.firstLast&&a.find("."+o.lastPageClass).removeClass(n),!a.loop&&a.controls.prevNext&&a.find("."+o.nextPageClass).show())),a.carouselControls||(a.find("li."+o.currentThumbClass).show().each(function(){var t=e(this).find("img").height();t>0&&e(this).height(t)}),a.onPageChanged(a))}},loadPage:function(e,t){if(a.validPage(e)){var i=e*a.pageSize,n=i-a.pageSize;i>a.images.length&&(i=a.images.length),a.pageTransition=!0,a.viewThumbs(n,i-1),a.separatePageBrowsing||(t?a.viewImage(t):(e>1||1===e&&a.viewFirstImage||a.initialized)&&a.viewImage(n)),a.pageTransition=!1}},viewThumbs:function(e,t){var i;if(a.showThumbs){for(i=e;t>=i;i++)a.viewThumb(i,i===e,i===t,!0);if(!a.carouselControls&&a.currentPage<a.numberOfPages()){var n=t+1,o=t+a.pageSize;for(o>=a.images.length&&(o=a.images.length-1),i=n;o>=i;i++){var r=a.viewThumb(i,i===n,i===o,!1);r&&r.length&&r.hide()}}}},viewThumb:function(e,t,i,n){0>e?e=a.images.length+e:e>=a.images.length&&(e-=a.images.length);var r=a.images[e],s=a.getThumb(e).parent();return s.length||(s=a.createThumbForImage(r,e),s.attr("rel",a.pageNumberForImage(e))),s.length&&(s.parent().append(s),t?s.addClass(o.firstThumbClass):s.removeClass(o.firstThumbClass),i?s.addClass(o.lastThumbClass):s.removeClass(o.lastThumbClass),n&&(a.carouselControls?s.show():s.addClass(o.currentThumbClass))),s},getThumb:function(e){return a.find('img[rel="'+e+'"]')},createThumbForImage:function(t,i){if(a.showThumbs){var n=a.getThumb(i);if(null===n||!n.length){var o=e("<li></li>");if(a.append(o),n=e("<img />"),t.thumb)n.attr("src",t.thumb);else{n.attr("src",t.src);var r=Math.ceil(n.width()/n.height()*o.height()),s=Math.ceil(n.height()/n.width()*o.width());s>r?n.css({height:"auto",maxWidth:o.width()}):n.css({width:"auto",maxHeight:o.height()})}return o.append(n.css("display","block")),n.attr("rel",i),t.caption&&a.showThumbToolTip&&n.attr("title",t.caption),n.data("data",t.data),n.click(function(){a.viewImage(Number(e(this).attr("rel")))}),n.load(function(){var t=e(this).height();t>0&&e(this).parent().height(t)}),a.onThumb(n),o}}return null},firstPage:function(){a.atFirstPage()||a.goToPage(1)},lastPage:function(){a.atLastPage()||a.goToPage(a.numberOfPages())},prevPage:function(){a.atFirstPage()?a.loop&&a.goToPage(a.numberOfPages()):a.goToPage(a.currentPage-1)},nextPage:function(){a.atLastPage()?a.loop&&a.goToPage(1):a.goToPage(a.currentPage+1)},firstImageOnPage:function(e){return e||(e=a.current),1===a.pageSize||0===e%a.pageSize},lastImageOnPage:function(e){e||(e=a.current);var t=a.images.length;if(1===a.pageSize||1===t)return!0;if(e>0){var i=a.pageSize,n=a.pageNumberForImage(e);if(n===a.numberOfPages()){var o=t%a.pageSize;o>0&&(i=o)}var r=e;return n>1&&(r-=(n-1)*a.pageSize),0===(r+1)%i}return!1},currentPageNumber:function(){return a.currentPage},numberOfImages:function(){return a.images.length},atFirstImage:function(){return 0===a.current},atLastImage:function(){return a.current===a.numberOfImages()-1},getImage:function(e){return null!==e&&e>-1&&a.images.length>e?a.images[e]:null},indexOfImage:function(e){return e&&o.isDefined(a.sources[e])?a.sources[e]:-1},currentImage:function(){return a.current},addImage:function(t,i,n,r){var s=a.numberOfPages(),l=a.newImage(t,i,n,r);if(l>-1){var c=a.pageNumberForImage(l),u=e("."+o.thumbsClass+' li[rel="'+c+'"]');u.length&&u.removeClass(o.lastThumbClass);var d=c>s;d&&(e("."+o.pagingClass).empty(),a.createPaging()),(d||c===a.currentPage)&&a.goToPage(a.currentPage)}},removeImage:function(t){if(1===a.images.length)a.removeAllImages();else{a.enableSlideshow&&a.pauseSlideshow();var i=a.numberOfPages();a.images.splice(t,1);var n=e.inArray(t,a.loadQueue);n>-1&&a.loadQueue.splice(n,1);var r=a.getThumb(t).parent();r.remove(),e("."+o.thumbsClass+" > li").each(function(i){if(i>=t){var n=a.pageNumberForImage(i);e(this).attr("rel",n),e(this).find("img").attr("rel",i),a.firstImageOnPage(i)?e(this).addClass(o.firstThumbClass):e(this).removeClass(o.firstThumbClass),a.lastImageOnPage(i)?e(this).addClass(o.lastThumbClass):e(this).removeClass(o.lastThumbClass),a.currentPage===n?e(this).show():e(this).hide()}});var s=i>e.exposure.numberOfPages;if(s&&(e("."+o.pagingClass).empty(),a.createPaging()),a.current===t){a.current=-1;var l=t;t===a.numberOfImages()&&(l=0),a.viewImage(l)}}},removeAllImages:function(){a.images=[],a.sources={},a.loadQueue=[],a.enableSlideshow&&a.pauseSlideshow(),e("."+o.thumbsClass+", "+"."+o.pagingClass).empty(),a.current=-1},viewImage:function(t){if(a.current!==t){a.enableSlideshow&&!a.slideshowTransition&&a.pauseSlideshow();var i=a.wrapper,n=!1,r=a.images[t];if(r){var s=r.src,l=r.caption,c=r.data;if(s){n=!0;var u=a.showThumbs,d=null;if(a.showThumbs){d=a.find('img[rel="'+t+'"]'),u=d&&d.length;var h=o.activeThumbClass;u?(d.parent().siblings().removeClass(h),d.parent().addClass(h)):a.find$("li."+h).removeClass(h)}i.parent().removeClass(o.loadedClass),a.loaded(t)&&i.parent().addClass(o.loadedClass),a.loadImage(t,function(){var t=i.find("."+o.imageClass);if(t.length&&(t.removeClass(o.currentImageClass),t.addClass(o.lastImageClass)),e(this).addClass(o.currentImageClass),i.append(e(this)),a.clickingNavigation&&e(this).click(a.nextImage),e(this).width()&&e(this).height())a.resizeContainer(e(this));else var n=e(this),r=setInterval(function(){a.resizeContainer(n),clearTimeout(r)},2);if(a.fullScreen&&!a.infullScreen&&(a.onEnterFullScreen(a.mask),a.infullScreen=!0),a.dataElement&&a.dataElement.length){if(a.showCaptions){var s=a.dataElement.find("."+o.captionClass);s.length&&(s.empty(),!l&&u&&(l=d.attr("title"))),s.html(l)}if(a.showExtraData){var h=a.dataElement.find("."+o.imageDataClass);h.length&&(h.empty(),!c&&u&&(c=d.data("data")),h.html(c))}}i.hover(function(){i.addClass(o.imageHoverClass),a.onImageHoverOver()},function(){i.removeClass(o.imageHoverClass),a.onImageHoverOut()}),a.onImage(e(this),a.dataElement,d),a.preloadNextInQueue()})}}if(n||(i.siblings().andSelf().empty(),a.find("li."+o.activeThumbClass).removeClass(o.activeThumbClass)),a.imageControls){var p=a.pageNumberForImage(t);a.currentPage===p||a.pageTransition||a.goToPage(p,t),a.updatePaging(t+1)}if(a.current=t,a.carouselControls&&a.images.length>a.pageSize){var f=t,m=a.pageSize-1,g=Math.floor(a.pageSize/2);!a.loop&&g>t?f=0:!a.loop&&t>=a.length-g?(m=a.length-1,f=m-a.pageSize+1):(f-=g,m=f+a.pageSize-1),a.onCarousel(f,m),a.find("li").removeClass(o.currentThumbClass).hide(),a.viewThumbs(f,m),a.currentPage=a.pageNumberForImage(t)}}},firstImage:function(){a.atFirstImage()||(a.separatePageBrowsing||a.atFirstPage()?a.viewImage(0):a.goToPage(1))},nextImage:function(){if(!a.separatePageBrowsing&&a.lastImageOnPage())a.atLastPage()&&a.loop?a.goToPage(1):a.goToPage(a.currentPage+1),a.onNext();else{var e=a.getNextImage();null!==e&&(a.viewImage(e),a.onNext())}var t=a.getNextImage();null!==t&&a.addToLoadQueue(t)},prevImage:function(){if(!a.separatePageBrowsing&&a.firstImageOnPage()){if(a.atFirstPage()&&a.loop)a.goToPage(a.numberOfPages(),a.numberOfImages()-1);else{var e=a.currentPage-1;a.goToPage(e,e*a.pageSize-1)}a.onPrev()}else{var t=a.getPrevImage();null!==t&&(a.viewImage(t),a.onPrev())}var i=a.getPrevImage();null!==i&&a.addToLoadQueue(i)},lastImage:function(){a.atLastImage()||(a.separatePageBrowsing||a.atLastPage()?a.viewImage(a.numberOfImages()-1):a.goToPage(a.numberOfPages(),a.numberOfImages()-1))},imageHasData:function(){if(a.dataElement&&a.dataElement.length){var t=a.dataElement.find("."+e.exposure.captionClass).html(),i=a.dataElement.find("."+e.exposure.imageDataClass).html();return t&&t.length>0||i&&i.length>0}return!1},pageTransition:!1,playingSlideshow:!1,slideshowTimer:null,slideshowTransition:!1,slideshow:function(){a.slideshowTimer=setTimeout(function(){a.slideshowTransition=!0,a.nextImage(),a.slideshowTransition=!1,a.slideshow()},a.slideshowDelay)},playSlideshow:function(){a.playingSlideshow||(a.slideshowControlsTarget&&(a.slideshowControlsElement.find("."+o.playSlideshowClass).hide(),a.slideshowControlsElement.find("."+o.pauseSlideshowClass).show()),a.slideshow(),a.playingSlideshow=!0),a.onSlideshowPlayed()},pauseSlideshow:function(){a.playingSlideshow&&(a.slideshowControlsTarget&&(a.slideshowControlsElement.find("."+o.playSlideshowClass).show(),a.slideshowControlsElement.find("."+o.pauseSlideshowClass).hide()),a.playingSlideshow=!1,a.slideshowTimer&&clearTimeout(a.slideshowTimer),a.onSlideshowPaused())},toggleSlideshow:function(){a.playingSlideshow?a.pauseSlideshow():a.playSlideshow()},first:function(){a.imageControls?a.firstImage():a.firstPage()},prev:function(){a.imageControls?a.prevImage():a.prevPage()},next:function(){a.imageControls?a.nextImage():a.nextPage()},last:function(){a.imageControls?a.lastImage():a.lastPage()},infullScreen:!1,exitFullScreen:function(){a.infullScreen&&(a.pauseSlideshow(),a.deselectCurrentImage(),a.onExitFullScreen(a.targetElement,a.mask),a.infullScreen=!1)},actualMaxWidth:function(e,t){return a.maxWidth?a.maxWidth-(o.widthDiff(e)+o.widthDiff(t)):0},actualMaxHeight:function(e,t){return a.maxHeight?a.maxHeight-(o.heightDiff(e)+o.heightDiff(t)):0},fitToMaxSize:function(e){var t=a.targetElement;if(a.stretchToMaxSize)a.maxWidth&&e.width(a.actualMaxWidth(e,t)),a.maxHeight&&e.height(a.actualMaxHeight(e,t));else if(e.width()>e.height())a.fitToMaxWidth(e,t),a.fitToMaxHeight(e,t);else if(e.height()>e.width())a.fitToMaxHeight(e,t),a.fitToMaxWidth(e,t);else{var i=a.actualMaxHeight(e,t),n=a.actualMaxWidth(e,t);(!n||i&&n&&n>i)&&(n=i),n&&e.width()>n&&(e.width(n),e.height(n))}},centerImageInWindow:function(t){var i=a.targetElement;i.width(t.width()).height(t.height()),i.css({top:(e(window).height()-i.outerHeight(!0))/2,left:(e(window).width()-i.outerWidth(!0))/2}),i.find("."+o.lastImageClass).each(function(){e(this).css({top:(i.height()-e(this).height())/2,left:(i.width()-e(this).width())/2})})},fitToWindow:function(){a.maxWidth=e(window).width(),a.maxHeight=e(window).height();var t=a.targetElement.find("."+e.exposure.currentImageClass).width("auto").height("auto");if(t.width()&&t.height())a.fitToMaxSize(t),a.centerImageInWindow(t);else var i=setInterval(function(){a.fitToMaxSize(t),a.centerImageInWindow(t),clearTimeout(i)},2)},fitToMaxWidth:function(e,t){var i=a.actualMaxWidth(e,t);if(i&&e.width()>i){var n=Math.round(i*e.height()/e.width());e.height(n),e.width(i)}},fitToMaxHeight:function(e,t){var i=a.actualMaxHeight(e,t);if(i&&e.height()>i){var n=Math.round(i*e.width()/e.height());e.width(n),e.height(i)}},resizeContainer:function(e){a.fitToMaxSize(e),a.fixedContainerSize||a.targetElement.show().width(e.width()).height(e.height())}}),e.extend(this,t,n),this.targetElement=e(this.target),this.targetElement.length||(this.target=t.target,this.targetElement=e('<div id="'+o.defaultTargetId+'"></div>').insertBefore(e(this)));var s=this.wrapper=e('<div class="'+o.wrapperClass+'"></div>'),l=this.targetElement.addClass(o.targetClass).append(s);if(this.showCaptions||this.showExtraData){var c="";this.showCaptions&&(c+='<div class="'+o.captionClass+'"></div>'),this.showExtraData&&(c+='<div class="'+o.imageDataClass+'"></div>');var u=e(c);u.length&&(this.dataElement=e(this.dataTarget),this.dataTarget&&this.dataElement.length?this.dataElement.addClass(o.dataContainerClass).append(u):(this.dataElement=e('<div class="'+o.dataContainerClass+'"></div>'),l.append(this.dataElement.append(u))))}this.showThumbs||(this.carouselControls=!1),!this.carouselControls&&this.controlsTarget&&(this.controls.prevNext||this.controls.firstLast||this.controls.pageNumbers)||(this.showControls=!1),this.showControls&&(this.controlsElement=e(this.controlsTarget).addClass(o.controlsClass).each(function(){a.controls.firstLast&&e(this).append(o.createLink(r.first,a.first,o.firstPageClass)),a.controls.prevNext&&e(this).append(o.createLink(r.previous,a.prev,o.prevPageClass)),a.controls.pageNumbers&&e(this).append(e('<div class="'+o.pagingClass+'"></div>')),a.controls.prevNext&&e(this).append(o.createLink(r.next,a.next,o.nextPageClass)),a.controls.firstLast&&e(this).append(o.createLink(r.last,a.last,o.lastPageClass))})),this.enableSlideshow&&this.slideshowControlsTarget&&(this.slideshowControlsElement=e(this.slideshowControlsTarget).addClass(o.slideshowControlsClass).each(function(){e(this).append(o.createLink(r.play,a.playSlideshow,o.playSlideshowClass)),e(this).append(o.createLink(r.pause,a.pauseSlideshow,o.pauseSlideshowClass).hide())})),this.keyboardNavigation&&(this.carouselControls?(e(document).bind("keyup","left",this.nextImage),e(document).bind("keyup","right",this.prevImage)):(e(document).bind("keyup","left",this.prevImage),e(document).bind("keyup","right",this.nextImage),e(document).bind("keyup","ctrl+left",this.prevPage),e(document).bind("keyup","ctrl+right",this.nextPage),e(document).bind("keyup","up",this.lastImage),e(document).bind("keyup","down",this.firstImage),e(document).bind("keyup","ctrl+up",this.lastPage),e(document).bind("keyup","ctrl+down",this.firstPage)),this.enableSlideshow&&e(document).bind("keyup","space",this.toggleSlideshow)),this.fullScreen&&(e(window).resize(this.fitToWindow),this.mask=e('<div class="'+o.maskClass+'"></div>').click(this.exitFullScreen).insertAfter(this.target),this.keyboardNavigation&&e(document).bind("keyup","esc",this.exitFullScreen));var d=null;return this.jsonSource&&(o.isObject(this.jsonSource)?d=this.jsonSource:this.jsonSource.length&&(d=o.startsWith(this.jsonSource,"http://")||o.startsWith(this.jsonSource,"https://")?e.ajax({url:this.jsonSource,type:"GET",async:!1}).responseText:this.jsonSource)),this.addClass(o.thumbsClass).each(function(){var t;if(d){var i=o.isObject(d)?d:e.parseJSON(d);if(i&&i.data)for(t in i.data){var n=i.data[t];if(n.source&&n.source.length){var r=e("<li></li>"),s=e("<a></a>").attr("href",n.source);if(n.thumb_source&&n.thumb_source.length){var l=e("<img />").attr("src",n.thumb_source);n.caption&&n.caption.length&&l.attr("title",n.caption),s.append(l)}else n.caption&&n.caption.length&&s.attr("title",n.caption);r.append(s),n.extra_data&&n.extra_data.length&&r.append(e(n.extra_data)),e(this).append(r)}}}var c=!1,u=!1;if(e(this).children("li").length){var h=null;e(this).show().children("li").each(function(){c=!0;var t=e(this).find("a");if(t.length){t=e(t[0]);var i=t.attr("href"),n=t.find("img"),r=n.length?n.attr("src"):t.attr("rel"),s=n.length?n.attr("title"):t.attr("title"),l=t.hasClass(o.selectedImageClass)&&!h;t.remove();var d=e(this).html();r&&(u=!0),e(this).remove();var p=a.newImage(i,r,s,d);p>-1&&(l&&(h=p),a.loadQueue.length<a.preloadBuffer&&a.addToLoadQueue(p))}else e(this).remove()}),a.showThumbs||(a.pageSize=1,e(o.thumbsClass).remove()),c?(a.preloadNextInQueue(),a.createPaging(),h?(a.goToPage(a.pageNumberForImage(h)),a.viewImage(h)):a.goToPage(1),a.enableSlideshow&&a.autostartSlideshow&&a.playSlideshow()):a.onEmpty(a)}else a.onEmpty(a);a.onInit(),a.initialized=!0})}})(jQuery),function(e){function t(t){if("string"==typeof t.data){var i=t.handler,n=t.data.toLowerCase().split(" ");t.handler=function(t){if(this===t.target||!/textarea|select/i.test(t.target.nodeName)&&"text"!==t.target.type){var a="keypress"!==t.type&&e.hotkeys.specialKeys[t.which],o=String.fromCharCode(t.which).toLowerCase(),r="",s={};t.altKey&&"alt"!==a&&(r+="alt+"),t.ctrlKey&&"ctrl"!==a&&(r+="ctrl+"),t.metaKey&&!t.ctrlKey&&"meta"!==a&&(r+="meta+"),t.shiftKey&&"shift"!==a&&(r+="shift+"),a?s[r+a]=!0:(s[r+o]=!0,s[r+e.hotkeys.shiftNums[o]]=!0,"shift+"===r&&(s[e.hotkeys.shiftNums[o]]=!0));for(var l=0,c=n.length;c>l;l++)if(s[n[l]])return i.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})}(jQuery);